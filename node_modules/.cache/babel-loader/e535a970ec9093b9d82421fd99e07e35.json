{"remainingRequest":"C:\\Users\\SDC-8\\Desktop\\Sowndarya\\CMTI ALL PROJECTS\\GERB-INDIA(CLIENT)\\GerbIndiaDashboard-CMTI-Full\\SmartMetrology\\smart-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\SDC-8\\Desktop\\Sowndarya\\CMTI ALL PROJECTS\\GERB-INDIA(CLIENT)\\GerbIndiaDashboard-CMTI-Full\\SmartMetrology\\smart-frontend\\node_modules\\dxf-viewer\\src\\OrbitControls.js","dependencies":[{"path":"C:\\Users\\SDC-8\\Desktop\\Sowndarya\\CMTI ALL PROJECTS\\GERB-INDIA(CLIENT)\\GerbIndiaDashboard-CMTI-Full\\SmartMetrology\\smart-frontend\\node_modules\\dxf-viewer\\src\\OrbitControls.js","mtime":1704432456000},{"path":"C:\\Users\\SDC-8\\Desktop\\Sowndarya\\CMTI ALL PROJECTS\\GERB-INDIA(CLIENT)\\GerbIndiaDashboard-CMTI-Full\\SmartMetrology\\smart-frontend\\babel.config.js","mtime":1694764762000},{"path":"C:\\Users\\SDC-8\\Desktop\\Sowndarya\\CMTI ALL PROJECTS\\GERB-INDIA(CLIENT)\\GerbIndiaDashboard-CMTI-Full\\SmartMetrology\\smart-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1704432454000},{"path":"C:\\Users\\SDC-8\\Desktop\\Sowndarya\\CMTI ALL PROJECTS\\GERB-INDIA(CLIENT)\\GerbIndiaDashboard-CMTI-Full\\SmartMetrology\\smart-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1704432454000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gRm9ya2VkIGZyb20gdGhyZWUvZXhhbXBsZXMvanMvY29udHJvbHMvT3JiaXRDb250cm9scy5qcyB0byBpbXBsZW1lbnQgYWRkaXRpb25hbCBmZWF0dXJlcyAoZS5nLgovLyB6b29taW5nIG9uIGN1cnNvcikuCgppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICJ0aHJlZSI7CgovLyBUaGlzIHNldCBvZiBjb250cm9scyBwZXJmb3JtcyBvcmJpdGluZywgZG9sbHlpbmcgKHpvb21pbmcpLCBhbmQgcGFubmluZy4KLy8gVW5saWtlIFRyYWNrYmFsbENvbnRyb2xzLCBpdCBtYWludGFpbnMgdGhlICJ1cCIgZGlyZWN0aW9uIG9iamVjdC51cCAoK1kgYnkgZGVmYXVsdCkuCi8vCi8vICAgIE9yYml0IC0gbGVmdCBtb3VzZSAvIHRvdWNoOiBvbmUtZmluZ2VyIG1vdmUKLy8gICAgWm9vbSAtIG1pZGRsZSBtb3VzZSwgb3IgbW91c2V3aGVlbCAvIHRvdWNoOiB0d28tZmluZ2VyIHNwcmVhZCBvciBzcXVpc2gKLy8gICAgUGFuIC0gcmlnaHQgbW91c2UsIG9yIGxlZnQgbW91c2UgKyBjdHJsL21ldGEvc2hpZnRLZXksIG9yIGFycm93IGtleXMgLyB0b3VjaDogdHdvLWZpbmdlciBtb3ZlCgpleHBvcnQgY29uc3QgT3JiaXRDb250cm9scyA9IGZ1bmN0aW9uIChvYmplY3QsIGRvbUVsZW1lbnQpIHsKICBpZiAoZG9tRWxlbWVudCA9PT0gdW5kZWZpbmVkKSBjb25zb2xlLndhcm4oJ1RIUkVFLk9yYml0Q29udHJvbHM6IFRoZSBzZWNvbmQgcGFyYW1ldGVyICJkb21FbGVtZW50IiBpcyBub3cgbWFuZGF0b3J5LicpOwogIGlmIChkb21FbGVtZW50ID09PSBkb2N1bWVudCkgY29uc29sZS5lcnJvcignVEhSRUUuT3JiaXRDb250cm9sczogImRvY3VtZW50IiBzaG91bGQgbm90IGJlIHVzZWQgYXMgdGhlIHRhcmdldCAiZG9tRWxlbWVudCIuIFBsZWFzZSB1c2UgInJlbmRlcmVyLmRvbUVsZW1lbnQiIGluc3RlYWQuJyk7CiAgdGhpcy5vYmplY3QgPSBvYmplY3Q7CiAgdGhpcy5kb21FbGVtZW50ID0gZG9tRWxlbWVudDsKCiAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdGhpcyBjb250cm9sCiAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKCiAgLy8gInRhcmdldCIgc2V0cyB0aGUgbG9jYXRpb24gb2YgZm9jdXMsIHdoZXJlIHRoZSBvYmplY3Qgb3JiaXRzIGFyb3VuZAogIHRoaXMudGFyZ2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKCiAgLy8gSG93IGZhciB5b3UgY2FuIGRvbGx5IGluIGFuZCBvdXQgKCBQZXJzcGVjdGl2ZUNhbWVyYSBvbmx5ICkKICB0aGlzLm1pbkRpc3RhbmNlID0gMDsKICB0aGlzLm1heERpc3RhbmNlID0gSW5maW5pdHk7CgogIC8vIEhvdyBmYXIgeW91IGNhbiB6b29tIGluIGFuZCBvdXQgKCBPcnRob2dyYXBoaWNDYW1lcmEgb25seSApCiAgdGhpcy5taW5ab29tID0gMDsKICB0aGlzLm1heFpvb20gPSBJbmZpbml0eTsKCiAgLy8gSG93IGZhciB5b3UgY2FuIG9yYml0IHZlcnRpY2FsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuCiAgLy8gUmFuZ2UgaXMgMCB0byBNYXRoLlBJIHJhZGlhbnMuCiAgdGhpcy5taW5Qb2xhckFuZ2xlID0gMDsgLy8gcmFkaWFucwogIHRoaXMubWF4UG9sYXJBbmdsZSA9IE1hdGguUEk7IC8vIHJhZGlhbnMKCiAgLy8gSG93IGZhciB5b3UgY2FuIG9yYml0IGhvcml6b250YWxseSwgdXBwZXIgYW5kIGxvd2VyIGxpbWl0cy4KICAvLyBJZiBzZXQsIHRoZSBpbnRlcnZhbCBbIG1pbiwgbWF4IF0gbXVzdCBiZSBhIHN1Yi1pbnRlcnZhbCBvZiBbIC0gMiBQSSwgMiBQSSBdLCB3aXRoICggbWF4IC0gbWluIDwgMiBQSSApCiAgdGhpcy5taW5BemltdXRoQW5nbGUgPSAtSW5maW5pdHk7IC8vIHJhZGlhbnMKICB0aGlzLm1heEF6aW11dGhBbmdsZSA9IEluZmluaXR5OyAvLyByYWRpYW5zCgogIC8vIFNldCB0byB0cnVlIHRvIGVuYWJsZSBkYW1waW5nIChpbmVydGlhKQogIC8vIElmIGRhbXBpbmcgaXMgZW5hYmxlZCwgeW91IG11c3QgY2FsbCBjb250cm9scy51cGRhdGUoKSBpbiB5b3VyIGFuaW1hdGlvbiBsb29wCiAgdGhpcy5lbmFibGVEYW1waW5nID0gZmFsc2U7CiAgdGhpcy5kYW1waW5nRmFjdG9yID0gMC4wNTsKCiAgLy8gVGhpcyBvcHRpb24gYWN0dWFsbHkgZW5hYmxlcyBkb2xseWluZyBpbiBhbmQgb3V0OyBsZWZ0IGFzICJ6b29tIiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuCiAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgem9vbWluZwogIHRoaXMuZW5hYmxlWm9vbSA9IHRydWU7CiAgdGhpcy56b29tU3BlZWQgPSAxLjA7CiAgdGhpcy5tb3VzZVpvb21TcGVlZEZhY3RvciA9IDE7CgogIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHJvdGF0aW5nCiAgdGhpcy5lbmFibGVSb3RhdGUgPSB0cnVlOwogIHRoaXMucm90YXRlU3BlZWQgPSAxLjA7CgogIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHBhbm5pbmcKICB0aGlzLmVuYWJsZVBhbiA9IHRydWU7CiAgdGhpcy5wYW5TcGVlZCA9IDEuMDsKICB0aGlzLnNjcmVlblNwYWNlUGFubmluZyA9IHRydWU7IC8vIGlmIGZhbHNlLCBwYW4gb3J0aG9nb25hbCB0byB3b3JsZC1zcGFjZSBkaXJlY3Rpb24gY2FtZXJhLnVwCiAgdGhpcy5rZXlQYW5TcGVlZCA9IDcuMDsgLy8gcGl4ZWxzIG1vdmVkIHBlciBhcnJvdyBrZXkgcHVzaAoKICAvLyBTZXQgdG8gdHJ1ZSB0byBhdXRvbWF0aWNhbGx5IHJvdGF0ZSBhcm91bmQgdGhlIHRhcmdldAogIC8vIElmIGF1dG8tcm90YXRlIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcAogIHRoaXMuYXV0b1JvdGF0ZSA9IGZhbHNlOwogIHRoaXMuYXV0b1JvdGF0ZVNwZWVkID0gMi4wOyAvLyAzMCBzZWNvbmRzIHBlciBvcmJpdCB3aGVuIGZwcyBpcyA2MAoKICAvLyBUaGUgZm91ciBhcnJvdyBrZXlzCiAgdGhpcy5rZXlzID0gewogICAgTEVGVDogMzcsCiAgICBVUDogMzgsCiAgICBSSUdIVDogMzksCiAgICBCT1RUT006IDQwCiAgfTsKCiAgLy8gTW91c2UgYnV0dG9ucwogIHRoaXMubW91c2VCdXR0b25zID0gewogICAgTEVGVDogVEhSRUUuTU9VU0UuUk9UQVRFLAogICAgTUlERExFOiBUSFJFRS5NT1VTRS5ET0xMWSwKICAgIFJJR0hUOiBUSFJFRS5NT1VTRS5QQU4KICB9OwoKICAvLyBUb3VjaCBmaW5nZXJzCiAgdGhpcy50b3VjaGVzID0gewogICAgT05FOiBUSFJFRS5UT1VDSC5ST1RBVEUsCiAgICBUV086IFRIUkVFLlRPVUNILkRPTExZX1BBTgogIH07CgogIC8vIGZvciByZXNldAogIHRoaXMudGFyZ2V0MCA9IHRoaXMudGFyZ2V0LmNsb25lKCk7CiAgdGhpcy5wb3NpdGlvbjAgPSB0aGlzLm9iamVjdC5wb3NpdGlvbi5jbG9uZSgpOwogIHRoaXMuem9vbTAgPSB0aGlzLm9iamVjdC56b29tOwoKICAvLyB0aGUgdGFyZ2V0IERPTSBlbGVtZW50IGZvciBrZXkgZXZlbnRzCiAgdGhpcy5fZG9tRWxlbWVudEtleUV2ZW50cyA9IG51bGw7CgogIC8vCiAgLy8gcHVibGljIG1ldGhvZHMKICAvLwoKICB0aGlzLmdldFBvbGFyQW5nbGUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3BoZXJpY2FsLnBoaTsKICB9OwogIHRoaXMuZ2V0QXppbXV0aGFsQW5nbGUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3BoZXJpY2FsLnRoZXRhOwogIH07CiAgdGhpcy5saXN0ZW5Ub0tleUV2ZW50cyA9IGZ1bmN0aW9uIChkb21FbGVtZW50KSB7CiAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd24pOwogICAgdGhpcy5fZG9tRWxlbWVudEtleUV2ZW50cyA9IGRvbUVsZW1lbnQ7CiAgfTsKICB0aGlzLnNhdmVTdGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHNjb3BlLnRhcmdldDAuY29weShzY29wZS50YXJnZXQpOwogICAgc2NvcGUucG9zaXRpb24wLmNvcHkoc2NvcGUub2JqZWN0LnBvc2l0aW9uKTsKICAgIHNjb3BlLnpvb20wID0gc2NvcGUub2JqZWN0Lnpvb207CiAgfTsKICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24gKCkgewogICAgc2NvcGUudGFyZ2V0LmNvcHkoc2NvcGUudGFyZ2V0MCk7CiAgICBzY29wZS5vYmplY3QucG9zaXRpb24uY29weShzY29wZS5wb3NpdGlvbjApOwogICAgc2NvcGUub2JqZWN0Lnpvb20gPSBzY29wZS56b29tMDsKICAgIHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KTsKICAgIHNjb3BlLnVwZGF0ZSgpOwogICAgc3RhdGUgPSBTVEFURS5OT05FOwogIH07CgogIC8vIHRoaXMgbWV0aG9kIGlzIGV4cG9zZWQsIGJ1dCBwZXJoYXBzIGl0IHdvdWxkIGJlIGJldHRlciBpZiB3ZSBjYW4gbWFrZSBpdCBwcml2YXRlLi4uCiAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgb2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKCiAgICAvLyBzbyBjYW1lcmEudXAgaXMgdGhlIG9yYml0IGF4aXMKICAgIHZhciBxdWF0ID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKS5zZXRGcm9tVW5pdFZlY3RvcnMob2JqZWN0LnVwLCBuZXcgVEhSRUUuVmVjdG9yMygwLCAxLCAwKSk7CiAgICB2YXIgcXVhdEludmVyc2UgPSBxdWF0LmNsb25lKCkuaW52ZXJ0KCk7CiAgICB2YXIgbGFzdFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKICAgIHZhciBsYXN0UXVhdGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7CiAgICB2YXIgdHdvUEkgPSAyICogTWF0aC5QSTsKICAgIHJldHVybiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBwb3NpdGlvbiA9IHNjb3BlLm9iamVjdC5wb3NpdGlvbjsKICAgICAgb2Zmc2V0LmNvcHkocG9zaXRpb24pLnN1YihzY29wZS50YXJnZXQpOwoKICAgICAgLy8gcm90YXRlIG9mZnNldCB0byAieS1heGlzLWlzLXVwIiBzcGFjZQogICAgICBvZmZzZXQuYXBwbHlRdWF0ZXJuaW9uKHF1YXQpOwoKICAgICAgLy8gYW5nbGUgZnJvbSB6LWF4aXMgYXJvdW5kIHktYXhpcwogICAgICBzcGhlcmljYWwuc2V0RnJvbVZlY3RvcjMob2Zmc2V0KTsKICAgICAgaWYgKHNjb3BlLmF1dG9Sb3RhdGUgJiYgc3RhdGUgPT09IFNUQVRFLk5PTkUpIHsKICAgICAgICByb3RhdGVMZWZ0KGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkpOwogICAgICB9CiAgICAgIGlmIChzY29wZS5lbmFibGVEYW1waW5nKSB7CiAgICAgICAgc3BoZXJpY2FsLnRoZXRhICs9IHNwaGVyaWNhbERlbHRhLnRoZXRhICogc2NvcGUuZGFtcGluZ0ZhY3RvcjsKICAgICAgICBzcGhlcmljYWwucGhpICs9IHNwaGVyaWNhbERlbHRhLnBoaSAqIHNjb3BlLmRhbXBpbmdGYWN0b3I7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3BoZXJpY2FsLnRoZXRhICs9IHNwaGVyaWNhbERlbHRhLnRoZXRhOwogICAgICAgIHNwaGVyaWNhbC5waGkgKz0gc3BoZXJpY2FsRGVsdGEucGhpOwogICAgICB9CgogICAgICAvLyByZXN0cmljdCB0aGV0YSB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzCgogICAgICB2YXIgbWluID0gc2NvcGUubWluQXppbXV0aEFuZ2xlOwogICAgICB2YXIgbWF4ID0gc2NvcGUubWF4QXppbXV0aEFuZ2xlOwogICAgICBpZiAoaXNGaW5pdGUobWluKSAmJiBpc0Zpbml0ZShtYXgpKSB7CiAgICAgICAgaWYgKG1pbiA8IC1NYXRoLlBJKSBtaW4gKz0gdHdvUEk7ZWxzZSBpZiAobWluID4gTWF0aC5QSSkgbWluIC09IHR3b1BJOwogICAgICAgIGlmIChtYXggPCAtTWF0aC5QSSkgbWF4ICs9IHR3b1BJO2Vsc2UgaWYgKG1heCA+IE1hdGguUEkpIG1heCAtPSB0d29QSTsKICAgICAgICBpZiAobWluIDw9IG1heCkgewogICAgICAgICAgc3BoZXJpY2FsLnRoZXRhID0gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHNwaGVyaWNhbC50aGV0YSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzcGhlcmljYWwudGhldGEgPSBzcGhlcmljYWwudGhldGEgPiAobWluICsgbWF4KSAvIDIgPyBNYXRoLm1heChtaW4sIHNwaGVyaWNhbC50aGV0YSkgOiBNYXRoLm1pbihtYXgsIHNwaGVyaWNhbC50aGV0YSk7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyByZXN0cmljdCBwaGkgdG8gYmUgYmV0d2VlbiBkZXNpcmVkIGxpbWl0cwogICAgICBzcGhlcmljYWwucGhpID0gTWF0aC5tYXgoc2NvcGUubWluUG9sYXJBbmdsZSwgTWF0aC5taW4oc2NvcGUubWF4UG9sYXJBbmdsZSwgc3BoZXJpY2FsLnBoaSkpOwogICAgICBzcGhlcmljYWwubWFrZVNhZmUoKTsKICAgICAgc3BoZXJpY2FsLnJhZGl1cyAqPSBzY2FsZTsKCiAgICAgIC8vIHJlc3RyaWN0IHJhZGl1cyB0byBiZSBiZXR3ZWVuIGRlc2lyZWQgbGltaXRzCiAgICAgIHNwaGVyaWNhbC5yYWRpdXMgPSBNYXRoLm1heChzY29wZS5taW5EaXN0YW5jZSwgTWF0aC5taW4oc2NvcGUubWF4RGlzdGFuY2UsIHNwaGVyaWNhbC5yYWRpdXMpKTsKCiAgICAgIC8vIG1vdmUgdGFyZ2V0IHRvIHBhbm5lZCBsb2NhdGlvbgoKICAgICAgaWYgKHNjb3BlLmVuYWJsZURhbXBpbmcgPT09IHRydWUpIHsKICAgICAgICBzY29wZS50YXJnZXQuYWRkU2NhbGVkVmVjdG9yKHBhbk9mZnNldCwgc2NvcGUuZGFtcGluZ0ZhY3Rvcik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2NvcGUudGFyZ2V0LmFkZChwYW5PZmZzZXQpOwogICAgICB9CiAgICAgIG9mZnNldC5zZXRGcm9tU3BoZXJpY2FsKHNwaGVyaWNhbCk7CgogICAgICAvLyByb3RhdGUgb2Zmc2V0IGJhY2sgdG8gImNhbWVyYS11cC12ZWN0b3ItaXMtdXAiIHNwYWNlCiAgICAgIG9mZnNldC5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpOwogICAgICBwb3NpdGlvbi5jb3B5KHNjb3BlLnRhcmdldCkuYWRkKG9mZnNldCk7CiAgICAgIHNjb3BlLm9iamVjdC5sb29rQXQoc2NvcGUudGFyZ2V0KTsKICAgICAgaWYgKHNjb3BlLmVuYWJsZURhbXBpbmcgPT09IHRydWUpIHsKICAgICAgICBzcGhlcmljYWxEZWx0YS50aGV0YSAqPSAxIC0gc2NvcGUuZGFtcGluZ0ZhY3RvcjsKICAgICAgICBzcGhlcmljYWxEZWx0YS5waGkgKj0gMSAtIHNjb3BlLmRhbXBpbmdGYWN0b3I7CiAgICAgICAgcGFuT2Zmc2V0Lm11bHRpcGx5U2NhbGFyKDEgLSBzY29wZS5kYW1waW5nRmFjdG9yKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzcGhlcmljYWxEZWx0YS5zZXQoMCwgMCwgMCk7CiAgICAgICAgcGFuT2Zmc2V0LnNldCgwLCAwLCAwKTsKICAgICAgfQogICAgICBzY2FsZSA9IDE7CgogICAgICAvLyB1cGRhdGUgY29uZGl0aW9uIGlzOgogICAgICAvLyBtaW4oY2FtZXJhIGRpc3BsYWNlbWVudCwgY2FtZXJhIHJvdGF0aW9uIGluIHJhZGlhbnMpXjIgPiBFUFMKICAgICAgLy8gdXNpbmcgc21hbGwtYW5nbGUgYXBwcm94aW1hdGlvbiBjb3MoeC8yKSA9IDEgLSB4XjIgLyA4CgogICAgICBpZiAoem9vbUNoYW5nZWQgfHwgbGFzdFBvc2l0aW9uLmRpc3RhbmNlVG9TcXVhcmVkKHNjb3BlLm9iamVjdC5wb3NpdGlvbikgPiBFUFMgfHwgOCAqICgxIC0gbGFzdFF1YXRlcm5pb24uZG90KHNjb3BlLm9iamVjdC5xdWF0ZXJuaW9uKSkgPiBFUFMpIHsKICAgICAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KTsKICAgICAgICBsYXN0UG9zaXRpb24uY29weShzY29wZS5vYmplY3QucG9zaXRpb24pOwogICAgICAgIGxhc3RRdWF0ZXJuaW9uLmNvcHkoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pOwogICAgICAgIHpvb21DaGFuZ2VkID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICB9KCk7CiAgdGhpcy5kaXNwb3NlID0gZnVuY3Rpb24gKCkgewogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUpOwogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24pOwogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIG9uTW91c2VXaGVlbCk7CiAgICBzY29wZS5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQpOwogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpOwogICAgc2NvcGUuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSk7CiAgICBzY29wZS5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlKTsKICAgIHNjb3BlLmRvbUVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvblBvaW50ZXJVcCk7CiAgICBpZiAoc2NvcGUuX2RvbUVsZW1lbnRLZXlFdmVudHMgIT09IG51bGwpIHsKICAgICAgc2NvcGUuX2RvbUVsZW1lbnRLZXlFdmVudHMucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7CiAgICB9CgogICAgLy9zY29wZS5kaXNwYXRjaEV2ZW50KCB7IHR5cGU6ICdkaXNwb3NlJyB9ICk7IC8vIHNob3VsZCB0aGlzIGJlIGFkZGVkIGhlcmU/CiAgfTsKCiAgLy8KICAvLyBpbnRlcm5hbHMKICAvLwoKICB2YXIgc2NvcGUgPSB0aGlzOwogIHZhciBjaGFuZ2VFdmVudCA9IHsKICAgIHR5cGU6ICdjaGFuZ2UnCiAgfTsKICB2YXIgc3RhcnRFdmVudCA9IHsKICAgIHR5cGU6ICdzdGFydCcKICB9OwogIHZhciBlbmRFdmVudCA9IHsKICAgIHR5cGU6ICdlbmQnCiAgfTsKICB2YXIgU1RBVEUgPSB7CiAgICBOT05FOiAtMSwKICAgIFJPVEFURTogMCwKICAgIERPTExZOiAxLAogICAgUEFOOiAyLAogICAgVE9VQ0hfUk9UQVRFOiAzLAogICAgVE9VQ0hfUEFOOiA0LAogICAgVE9VQ0hfRE9MTFlfUEFOOiA1LAogICAgVE9VQ0hfRE9MTFlfUk9UQVRFOiA2CiAgfTsKICB2YXIgc3RhdGUgPSBTVEFURS5OT05FOwogIHZhciBFUFMgPSAwLjAwMDAwMTsKCiAgLy8gY3VycmVudCBwb3NpdGlvbiBpbiBzcGhlcmljYWwgY29vcmRpbmF0ZXMKICB2YXIgc3BoZXJpY2FsID0gbmV3IFRIUkVFLlNwaGVyaWNhbCgpOwogIHZhciBzcGhlcmljYWxEZWx0YSA9IG5ldyBUSFJFRS5TcGhlcmljYWwoKTsKICB2YXIgc2NhbGUgPSAxOwogIHZhciBwYW5PZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpOwogIHZhciB6b29tQ2hhbmdlZCA9IGZhbHNlOwogIHZhciByb3RhdGVTdGFydCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7CiAgdmFyIHJvdGF0ZUVuZCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7CiAgdmFyIHJvdGF0ZURlbHRhID0gbmV3IFRIUkVFLlZlY3RvcjIoKTsKICB2YXIgcGFuU3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMigpOwogIHZhciBwYW5FbmQgPSBuZXcgVEhSRUUuVmVjdG9yMigpOwogIHZhciBwYW5EZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7CiAgdmFyIGRvbGx5Q2VudGVyID0gbmV3IFRIUkVFLlZlY3RvcjIoKTsKICB2YXIgZG9sbHlTdGFydCA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7CiAgdmFyIGRvbGx5RW5kID0gbmV3IFRIUkVFLlZlY3RvcjIoKTsKICB2YXIgZG9sbHlEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7CiAgZnVuY3Rpb24gZ2V0QXV0b1JvdGF0aW9uQW5nbGUoKSB7CiAgICByZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkOwogIH0KICBmdW5jdGlvbiBnZXRab29tU2NhbGUoaXNNb3VzZU1vdmVtZW50KSB7CiAgICByZXR1cm4gTWF0aC5wb3coMC45NSwgc2NvcGUuem9vbVNwZWVkICogKGlzTW91c2VNb3ZlbWVudCA/IHNjb3BlLm1vdXNlWm9vbVNwZWVkRmFjdG9yIDogMSkpOwogIH0KICBmdW5jdGlvbiByb3RhdGVMZWZ0KGFuZ2xlKSB7CiAgICBzcGhlcmljYWxEZWx0YS50aGV0YSAtPSBhbmdsZTsKICB9CiAgZnVuY3Rpb24gcm90YXRlVXAoYW5nbGUpIHsKICAgIHNwaGVyaWNhbERlbHRhLnBoaSAtPSBhbmdsZTsKICB9CiAgdmFyIHBhbkxlZnQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gcGFuTGVmdChkaXN0YW5jZSwgb2JqZWN0TWF0cml4KSB7CiAgICAgIHYuc2V0RnJvbU1hdHJpeENvbHVtbihvYmplY3RNYXRyaXgsIDApOyAvLyBnZXQgWCBjb2x1bW4gb2Ygb2JqZWN0TWF0cml4CiAgICAgIHYubXVsdGlwbHlTY2FsYXIoLWRpc3RhbmNlKTsKICAgICAgcGFuT2Zmc2V0LmFkZCh2KTsKICAgIH07CiAgfSgpOwogIHZhciBwYW5VcCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKICAgIHJldHVybiBmdW5jdGlvbiBwYW5VcChkaXN0YW5jZSwgb2JqZWN0TWF0cml4KSB7CiAgICAgIGlmIChzY29wZS5zY3JlZW5TcGFjZVBhbm5pbmcgPT09IHRydWUpIHsKICAgICAgICB2LnNldEZyb21NYXRyaXhDb2x1bW4ob2JqZWN0TWF0cml4LCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2LnNldEZyb21NYXRyaXhDb2x1bW4ob2JqZWN0TWF0cml4LCAwKTsKICAgICAgICB2LmNyb3NzVmVjdG9ycyhzY29wZS5vYmplY3QudXAsIHYpOwogICAgICB9CiAgICAgIHYubXVsdGlwbHlTY2FsYXIoZGlzdGFuY2UpOwogICAgICBwYW5PZmZzZXQuYWRkKHYpOwogICAgfTsKICB9KCk7CgogIC8vIGRlbHRhWCBhbmQgZGVsdGFZIGFyZSBpbiBwaXhlbHM7IHJpZ2h0IGFuZCBkb3duIGFyZSBwb3NpdGl2ZQogIHZhciBwYW4gPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgb2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTsKICAgIHJldHVybiBmdW5jdGlvbiBwYW4oZGVsdGFYLCBkZWx0YVkpIHsKICAgICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50OwogICAgICBpZiAoc2NvcGUub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmEpIHsKICAgICAgICAvLyBwZXJzcGVjdGl2ZQogICAgICAgIHZhciBwb3NpdGlvbiA9IHNjb3BlLm9iamVjdC5wb3NpdGlvbjsKICAgICAgICBvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHNjb3BlLnRhcmdldCk7CiAgICAgICAgdmFyIHRhcmdldERpc3RhbmNlID0gb2Zmc2V0Lmxlbmd0aCgpOwoKICAgICAgICAvLyBoYWxmIG9mIHRoZSBmb3YgaXMgY2VudGVyIHRvIHRvcCBvZiBzY3JlZW4KICAgICAgICB0YXJnZXREaXN0YW5jZSAqPSBNYXRoLnRhbihzY29wZS5vYmplY3QuZm92IC8gMiAqIE1hdGguUEkgLyAxODAuMCk7CgogICAgICAgIC8vIHdlIHVzZSBvbmx5IGNsaWVudEhlaWdodCBoZXJlIHNvIGFzcGVjdCByYXRpbyBkb2VzIG5vdCBkaXN0b3J0IHNwZWVkCiAgICAgICAgcGFuTGVmdCgyICogZGVsdGFYICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7CiAgICAgICAgcGFuVXAoMiAqIGRlbHRhWSAqIHRhcmdldERpc3RhbmNlIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpOwogICAgICB9IGVsc2UgaWYgKHNjb3BlLm9iamVjdC5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgewogICAgICAgIC8vIG9ydGhvZ3JhcGhpYwogICAgICAgIHBhbkxlZnQoZGVsdGFYICogKHNjb3BlLm9iamVjdC5yaWdodCAtIHNjb3BlLm9iamVjdC5sZWZ0KSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRXaWR0aCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCBzY29wZS5vYmplY3QubWF0cml4KTsKICAgICAgICBwYW5VcChkZWx0YVkgKiAoc2NvcGUub2JqZWN0LnRvcCAtIHNjb3BlLm9iamVjdC5ib3R0b20pIC8gc2NvcGUub2JqZWN0Lnpvb20gLyBlbGVtZW50LmNsaWVudEhlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCBzY29wZS5vYmplY3QubWF0cml4KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBjYW1lcmEgbmVpdGhlciBvcnRob2dyYXBoaWMgbm9yIHBlcnNwZWN0aXZlCiAgICAgICAgY29uc29sZS53YXJuKCdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBwYW4gZGlzYWJsZWQuJyk7CiAgICAgICAgc2NvcGUuZW5hYmxlUGFuID0gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgfSgpOwogIGZ1bmN0aW9uIHpvb21QYW4oem9vbVJhdGlvLCB6b29tQ2VudGVyKSB7CiAgICBjb25zdCBwYW5YID0gKHpvb21DZW50ZXIueCAtIHNjb3BlLmRvbUVsZW1lbnQud2lkdGggLyAyKSAqICh6b29tUmF0aW8gLSAxKSAvIHpvb21SYXRpbzsKICAgIGNvbnN0IHBhblkgPSAoem9vbUNlbnRlci55IC0gc2NvcGUuZG9tRWxlbWVudC5oZWlnaHQgLyAyKSAqICh6b29tUmF0aW8gLSAxKSAvIHpvb21SYXRpbzsKICAgIHBhbigtcGFuWCwgLXBhblkpOwogIH0KICBmdW5jdGlvbiBkb2xseU91dChkb2xseVNjYWxlLCB6b29tQ2VudGVyKSB7CiAgICBpZiAoc2NvcGUub2JqZWN0LmlzUGVyc3BlY3RpdmVDYW1lcmEpIHsKICAgICAgc2NhbGUgLz0gZG9sbHlTY2FsZTsKICAgIH0gZWxzZSBpZiAoc2NvcGUub2JqZWN0LmlzT3J0aG9ncmFwaGljQ2FtZXJhKSB7CiAgICAgIGNvbnN0IG5ld1pvb20gPSBNYXRoLm1heChzY29wZS5taW5ab29tLCBNYXRoLm1pbihzY29wZS5tYXhab29tLCBzY29wZS5vYmplY3Quem9vbSAqIGRvbGx5U2NhbGUpKTsKICAgICAgem9vbVBhbihuZXdab29tIC8gc2NvcGUub2JqZWN0Lnpvb20sIHpvb21DZW50ZXIpOwogICAgICBzY29wZS5vYmplY3Quem9vbSA9IG5ld1pvb207CiAgICAgIHNjb3BlLm9iamVjdC51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7CiAgICAgIHpvb21DaGFuZ2VkID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUud2FybignV0FSTklORzogT3JiaXRDb250cm9scy5qcyBlbmNvdW50ZXJlZCBhbiB1bmtub3duIGNhbWVyYSB0eXBlIC0gZG9sbHkvem9vbSBkaXNhYmxlZC4nKTsKICAgICAgc2NvcGUuZW5hYmxlWm9vbSA9IGZhbHNlOwogICAgfQogIH0KICBmdW5jdGlvbiBkb2xseUluKGRvbGx5U2NhbGUsIHpvb21DZW50ZXIpIHsKICAgIGlmIChzY29wZS5vYmplY3QuaXNQZXJzcGVjdGl2ZUNhbWVyYSkgewogICAgICBzY2FsZSAqPSBkb2xseVNjYWxlOwogICAgfSBlbHNlIGlmIChzY29wZS5vYmplY3QuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHsKICAgICAgY29uc3QgbmV3Wm9vbSA9IE1hdGgubWF4KHNjb3BlLm1pblpvb20sIE1hdGgubWluKHNjb3BlLm1heFpvb20sIHNjb3BlLm9iamVjdC56b29tIC8gZG9sbHlTY2FsZSkpOwogICAgICB6b29tUGFuKG5ld1pvb20gLyBzY29wZS5vYmplY3Quem9vbSwgem9vbUNlbnRlcik7CiAgICAgIHNjb3BlLm9iamVjdC56b29tID0gbmV3Wm9vbTsKICAgICAgc2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKICAgICAgem9vbUNoYW5nZWQgPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS53YXJuKCdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUgLSBkb2xseS96b29tIGRpc2FibGVkLicpOwogICAgICBzY29wZS5lbmFibGVab29tID0gZmFsc2U7CiAgICB9CiAgfQoKICAvLwogIC8vIGV2ZW50IGNhbGxiYWNrcyAtIHVwZGF0ZSB0aGUgb2JqZWN0IHN0YXRlCiAgLy8KCiAgZnVuY3Rpb24gaGFuZGxlTW91c2VEb3duUm90YXRlKGV2ZW50KSB7CiAgICByb3RhdGVTdGFydC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93bkRvbGx5KGV2ZW50KSB7CiAgICBjb25zdCBjYW52YXNSZWN0ID0gc2NvcGUuZG9tRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIGRvbGx5Q2VudGVyLnNldChldmVudC5jbGllbnRYIC0gY2FudmFzUmVjdC5sZWZ0LCBldmVudC5jbGllbnRZIC0gY2FudmFzUmVjdC50b3ApOwogICAgZG9sbHlTdGFydC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlRG93blBhbihldmVudCkgewogICAgcGFuU3RhcnQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogIH0KICBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVSb3RhdGUoZXZlbnQpIHsKICAgIHJvdGF0ZUVuZC5zZXQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7CiAgICByb3RhdGVEZWx0YS5zdWJWZWN0b3JzKHJvdGF0ZUVuZCwgcm90YXRlU3RhcnQpLm11bHRpcGx5U2NhbGFyKHNjb3BlLnJvdGF0ZVNwZWVkKTsKICAgIHZhciBlbGVtZW50ID0gc2NvcGUuZG9tRWxlbWVudDsKICAgIHJvdGF0ZUxlZnQoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS54IC8gZWxlbWVudC5jbGllbnRIZWlnaHQpOyAvLyB5ZXMsIGhlaWdodAoKICAgIHJvdGF0ZVVwKDIgKiBNYXRoLlBJICogcm90YXRlRGVsdGEueSAvIGVsZW1lbnQuY2xpZW50SGVpZ2h0KTsKICAgIHJvdGF0ZVN0YXJ0LmNvcHkocm90YXRlRW5kKTsKICAgIHNjb3BlLnVwZGF0ZSgpOwogIH0KICBmdW5jdGlvbiBoYW5kbGVNb3VzZU1vdmVEb2xseShldmVudCkgewogICAgZG9sbHlFbmQuc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpOwogICAgZG9sbHlEZWx0YS5zdWJWZWN0b3JzKGRvbGx5RW5kLCBkb2xseVN0YXJ0KTsKICAgIGlmIChkb2xseURlbHRhLnkgPiAwKSB7CiAgICAgIGRvbGx5T3V0KGdldFpvb21TY2FsZSh0cnVlKSwgZG9sbHlDZW50ZXIpOwogICAgfSBlbHNlIGlmIChkb2xseURlbHRhLnkgPCAwKSB7CiAgICAgIGRvbGx5SW4oZ2V0Wm9vbVNjYWxlKHRydWUpLCBkb2xseUNlbnRlcik7CiAgICB9CiAgICBkb2xseVN0YXJ0LmNvcHkoZG9sbHlFbmQpOwogICAgc2NvcGUudXBkYXRlKCk7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZU1vdXNlTW92ZVBhbihldmVudCkgewogICAgcGFuRW5kLnNldChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTsKICAgIHBhbkRlbHRhLnN1YlZlY3RvcnMocGFuRW5kLCBwYW5TdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucGFuU3BlZWQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7CiAgICBwYW4ocGFuRGVsdGEueCwgcGFuRGVsdGEueSk7CiAgICBwYW5TdGFydC5jb3B5KHBhbkVuZCk7CiAgICBzY29wZS51cGRhdGUoKTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlTW91c2VVcCggLypldmVudCovCiAgKSB7CgogICAgLy8gbm8tb3AKICB9CiAgZnVuY3Rpb24gaGFuZGxlTW91c2VXaGVlbChldmVudCkgewogICAgY29uc3QgY2FudmFzUmVjdCA9IHNjb3BlLmRvbUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBjb25zdCB6b29tQ2VudGVyID0gbmV3IFRIUkVFLlZlY3RvcjIoKGV2ZW50LmNsaWVudFggLSBjYW52YXNSZWN0LmxlZnQpICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIChldmVudC5jbGllbnRZIC0gY2FudmFzUmVjdC50b3ApICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgaWYgKGV2ZW50LmRlbHRhWSA8IDApIHsKICAgICAgZG9sbHlJbihnZXRab29tU2NhbGUoKSwgem9vbUNlbnRlcik7CiAgICB9IGVsc2UgaWYgKGV2ZW50LmRlbHRhWSA+IDApIHsKICAgICAgZG9sbHlPdXQoZ2V0Wm9vbVNjYWxlKCksIHpvb21DZW50ZXIpOwogICAgfQogICAgc2NvcGUudXBkYXRlKCk7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZUtleURvd24oZXZlbnQpIHsKICAgIHZhciBuZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7CiAgICAgIGNhc2Ugc2NvcGUua2V5cy5VUDoKICAgICAgICBwYW4oMCwgc2NvcGUua2V5UGFuU3BlZWQpOwogICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBzY29wZS5rZXlzLkJPVFRPTToKICAgICAgICBwYW4oMCwgLXNjb3BlLmtleVBhblNwZWVkKTsKICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2Ugc2NvcGUua2V5cy5MRUZUOgogICAgICAgIHBhbihzY29wZS5rZXlQYW5TcGVlZCwgMCk7CiAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIHNjb3BlLmtleXMuUklHSFQ6CiAgICAgICAgcGFuKC1zY29wZS5rZXlQYW5TcGVlZCwgMCk7CiAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICAgIGJyZWFrOwogICAgfQogICAgaWYgKG5lZWRzVXBkYXRlKSB7CiAgICAgIC8vIHByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSBzY3JvbGxpbmcgb24gY3Vyc29yIGtleXMKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgc2NvcGUudXBkYXRlKCk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnRSb3RhdGUoZXZlbnQpIHsKICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHJvdGF0ZVN0YXJ0LnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciB4ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggKyBldmVudC50b3VjaGVzWzFdLnBhZ2VYKTsKICAgICAgdmFyIHkgPSAwLjUgKiAoZXZlbnQudG91Y2hlc1swXS5wYWdlWSArIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVkpOwogICAgICByb3RhdGVTdGFydC5zZXQoeCwgeSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnRQYW4oZXZlbnQpIHsKICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHBhblN0YXJ0LnNldChldmVudC50b3VjaGVzWzBdLnBhZ2VYLCBldmVudC50b3VjaGVzWzBdLnBhZ2VZKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciB4ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVggKyBldmVudC50b3VjaGVzWzFdLnBhZ2VYKTsKICAgICAgdmFyIHkgPSAwLjUgKiAoZXZlbnQudG91Y2hlc1swXS5wYWdlWSArIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVkpOwogICAgICBwYW5TdGFydC5zZXQoeCwgeSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnREb2xseShldmVudCkgewogICAgY29uc3QgY2FudmFzUmVjdCA9IHNjb3BlLmRvbUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBkb2xseUNlbnRlci5zZXQoKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WCArIGV2ZW50LnRvdWNoZXNbMV0uY2xpZW50WCkgLyAyIC0gY2FudmFzUmVjdC5sZWZ0LCAoZXZlbnQudG91Y2hlc1swXS5jbGllbnRZICsgZXZlbnQudG91Y2hlc1sxXS5jbGllbnRZKSAvIDIgLSBjYW52YXNSZWN0LnRvcCkubXVsdGlwbHlTY2FsYXIod2luZG93LmRldmljZVBpeGVsUmF0aW8pOwogICAgdmFyIGR4ID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGV2ZW50LnRvdWNoZXNbMV0ucGFnZVg7CiAgICB2YXIgZHkgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VZIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWTsKICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7CiAgICBkb2xseVN0YXJ0LnNldCgwLCBkaXN0YW5jZSk7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnREb2xseVBhbihldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZVpvb20pIGhhbmRsZVRvdWNoU3RhcnREb2xseShldmVudCk7CiAgICBpZiAoc2NvcGUuZW5hYmxlUGFuKSBoYW5kbGVUb3VjaFN0YXJ0UGFuKGV2ZW50KTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydERvbGx5Um90YXRlKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSkgaGFuZGxlVG91Y2hTdGFydERvbGx5KGV2ZW50KTsKICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUpIGhhbmRsZVRvdWNoU3RhcnRSb3RhdGUoZXZlbnQpOwogIH0KICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVSb3RhdGUoZXZlbnQpIHsKICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHJvdGF0ZUVuZC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgeCA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VYICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWCk7CiAgICAgIHZhciB5ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgKyBldmVudC50b3VjaGVzWzFdLnBhZ2VZKTsKICAgICAgcm90YXRlRW5kLnNldCh4LCB5KTsKICAgIH0KICAgIHJvdGF0ZURlbHRhLnN1YlZlY3RvcnMocm90YXRlRW5kLCByb3RhdGVTdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucm90YXRlU3BlZWQpOwogICAgdmFyIGVsZW1lbnQgPSBzY29wZS5kb21FbGVtZW50OwogICAgcm90YXRlTGVmdCgyICogTWF0aC5QSSAqIHJvdGF0ZURlbHRhLnggLyBlbGVtZW50LmNsaWVudEhlaWdodCk7IC8vIHllcywgaGVpZ2h0CgogICAgcm90YXRlVXAoMiAqIE1hdGguUEkgKiByb3RhdGVEZWx0YS55IC8gZWxlbWVudC5jbGllbnRIZWlnaHQpOwogICAgcm90YXRlU3RhcnQuY29weShyb3RhdGVFbmQpOwogIH0KICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVQYW4oZXZlbnQpIHsKICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHBhbkVuZC5zZXQoZXZlbnQudG91Y2hlc1swXS5wYWdlWCwgZXZlbnQudG91Y2hlc1swXS5wYWdlWSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgeCA9IDAuNSAqIChldmVudC50b3VjaGVzWzBdLnBhZ2VYICsgZXZlbnQudG91Y2hlc1sxXS5wYWdlWCk7CiAgICAgIHZhciB5ID0gMC41ICogKGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgKyBldmVudC50b3VjaGVzWzFdLnBhZ2VZKTsKICAgICAgcGFuRW5kLnNldCh4LCB5KTsKICAgIH0KICAgIHBhbkRlbHRhLnN1YlZlY3RvcnMocGFuRW5kLCBwYW5TdGFydCkubXVsdGlwbHlTY2FsYXIoc2NvcGUucGFuU3BlZWQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7CiAgICBwYW4ocGFuRGVsdGEueCwgcGFuRGVsdGEueSk7CiAgICBwYW5TdGFydC5jb3B5KHBhbkVuZCk7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZURvbGx5KGV2ZW50KSB7CiAgICB2YXIgZHggPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIC0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWDsKICAgIHZhciBkeSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgLSBldmVudC50b3VjaGVzWzFdLnBhZ2VZOwogICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTsKICAgIGRvbGx5RW5kLnNldCgwLCBkaXN0YW5jZSk7CiAgICBkb2xseURlbHRhLnNldCgwLCBkb2xseUVuZC55IC8gZG9sbHlTdGFydC55KTsKICAgIGRvbGx5T3V0KGRvbGx5RGVsdGEueSwgZG9sbHlDZW50ZXIpOwogICAgZG9sbHlTdGFydC5jb3B5KGRvbGx5RW5kKTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlRG9sbHlQYW4oZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVab29tKSBoYW5kbGVUb3VjaE1vdmVEb2xseShldmVudCk7CiAgICBpZiAoc2NvcGUuZW5hYmxlUGFuKSBoYW5kbGVUb3VjaE1vdmVQYW4oZXZlbnQpOwogIH0KICBmdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmVEb2xseVJvdGF0ZShldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZVpvb20pIGhhbmRsZVRvdWNoTW92ZURvbGx5KGV2ZW50KTsKICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUpIGhhbmRsZVRvdWNoTW92ZVJvdGF0ZShldmVudCk7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZVRvdWNoRW5kKCAvKmV2ZW50Ki8KICApIHsKCiAgICAvLyBuby1vcAogIH0KCiAgLy8KICAvLyBldmVudCBoYW5kbGVycyAtIEZTTTogbGlzdGVuIGZvciBldmVudHMgYW5kIHJlc2V0IHN0YXRlCiAgLy8KCiAgZnVuY3Rpb24gb25Qb2ludGVyRG93bihldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBzd2l0Y2ggKGV2ZW50LnBvaW50ZXJUeXBlKSB7CiAgICAgIGNhc2UgJ21vdXNlJzoKICAgICAgY2FzZSAncGVuJzoKICAgICAgICBvbk1vdXNlRG93bihldmVudCk7CiAgICAgICAgYnJlYWs7CgogICAgICAvLyBUT0RPIHRvdWNoCiAgICB9CiAgfQoKICBmdW5jdGlvbiBvblBvaW50ZXJNb3ZlKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIHN3aXRjaCAoZXZlbnQucG9pbnRlclR5cGUpIHsKICAgICAgY2FzZSAnbW91c2UnOgogICAgICBjYXNlICdwZW4nOgogICAgICAgIG9uTW91c2VNb3ZlKGV2ZW50KTsKICAgICAgICBicmVhazsKCiAgICAgIC8vIFRPRE8gdG91Y2gKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9uUG9pbnRlclVwKGV2ZW50KSB7CiAgICBzd2l0Y2ggKGV2ZW50LnBvaW50ZXJUeXBlKSB7CiAgICAgIGNhc2UgJ21vdXNlJzoKICAgICAgY2FzZSAncGVuJzoKICAgICAgICBvbk1vdXNlVXAoZXZlbnQpOwogICAgICAgIGJyZWFrOwoKICAgICAgLy8gVE9ETyB0b3VjaAogICAgfQogIH0KCiAgZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQpIHsKICAgIC8vIFByZXZlbnQgdGhlIGJyb3dzZXIgZnJvbSBzY3JvbGxpbmcuCiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgIC8vIE1hbnVhbGx5IHNldCB0aGUgZm9jdXMgc2luY2UgY2FsbGluZyBwcmV2ZW50RGVmYXVsdCBhYm92ZQogICAgLy8gcHJldmVudHMgdGhlIGJyb3dzZXIgZnJvbSBzZXR0aW5nIGl0IGF1dG9tYXRpY2FsbHkuCgogICAgc2NvcGUuZG9tRWxlbWVudC5mb2N1cyA/IHNjb3BlLmRvbUVsZW1lbnQuZm9jdXMoKSA6IHdpbmRvdy5mb2N1cygpOwogICAgdmFyIG1vdXNlQWN0aW9uOwogICAgc3dpdGNoIChldmVudC5idXR0b24pIHsKICAgICAgY2FzZSAwOgogICAgICAgIG1vdXNlQWN0aW9uID0gc2NvcGUubW91c2VCdXR0b25zLkxFRlQ7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMToKICAgICAgICBtb3VzZUFjdGlvbiA9IHNjb3BlLm1vdXNlQnV0dG9ucy5NSURETEU7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMjoKICAgICAgICBtb3VzZUFjdGlvbiA9IHNjb3BlLm1vdXNlQnV0dG9ucy5SSUdIVDsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICBtb3VzZUFjdGlvbiA9IC0xOwogICAgfQogICAgc3dpdGNoIChtb3VzZUFjdGlvbikgewogICAgICBjYXNlIFRIUkVFLk1PVVNFLkRPTExZOgogICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZU1vdXNlRG93bkRvbGx5KGV2ZW50KTsKICAgICAgICBzdGF0ZSA9IFNUQVRFLkRPTExZOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFRIUkVFLk1PVVNFLlJPVEFURToKICAgICAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LnNoaWZ0S2V5KSB7CiAgICAgICAgICBpZiAoc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgICAgaGFuZGxlTW91c2VEb3duUGFuKGV2ZW50KTsKICAgICAgICAgIHN0YXRlID0gU1RBVEUuUEFOOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgICAgaGFuZGxlTW91c2VEb3duUm90YXRlKGV2ZW50KTsKICAgICAgICAgIHN0YXRlID0gU1RBVEUuUk9UQVRFOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBUSFJFRS5NT1VTRS5QQU46CiAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSkgewogICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgIGhhbmRsZU1vdXNlRG93blJvdGF0ZShldmVudCk7CiAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlJPVEFURTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICAgIGhhbmRsZU1vdXNlRG93blBhbihldmVudCk7CiAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlBBTjsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgfQogICAgaWYgKHN0YXRlICE9PSBTVEFURS5OT05FKSB7CiAgICAgIHNjb3BlLmRvbUVsZW1lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIG9uUG9pbnRlck1vdmUpOwogICAgICBzY29wZS5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgb25Qb2ludGVyVXApOwogICAgICBzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpOwogICAgfQogIH0KICBmdW5jdGlvbiBvbk1vdXNlTW92ZShldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgc3dpdGNoIChzdGF0ZSkgewogICAgICBjYXNlIFNUQVRFLlJPVEFURToKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZU1vdXNlTW92ZVJvdGF0ZShldmVudCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU1RBVEUuRE9MTFk6CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlTW91c2VNb3ZlRG9sbHkoZXZlbnQpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFNUQVRFLlBBTjoKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZU1vdXNlTW92ZVBhbihldmVudCk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG9uTW91c2VVcChldmVudCkgewogICAgc2NvcGUuZG9tRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSk7CiAgICBzY29wZS5kb21FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgb25Qb2ludGVyVXApOwogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBoYW5kbGVNb3VzZVVwKGV2ZW50KTsKICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoZW5kRXZlbnQpOwogICAgc3RhdGUgPSBTVEFURS5OT05FOwogIH0KICBmdW5jdGlvbiBvbk1vdXNlV2hlZWwoZXZlbnQpIHsKICAgIGlmIChzY29wZS5lbmFibGVkID09PSBmYWxzZSB8fCBzY29wZS5lbmFibGVab29tID09PSBmYWxzZSB8fCBzdGF0ZSAhPT0gU1RBVEUuTk9ORSAmJiBzdGF0ZSAhPT0gU1RBVEUuUk9UQVRFKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpOwogICAgaGFuZGxlTW91c2VXaGVlbChldmVudCk7CiAgICBzY29wZS5kaXNwYXRjaEV2ZW50KGVuZEV2ZW50KTsKICB9CiAgZnVuY3Rpb24gb25LZXlEb3duKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UgfHwgc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSkgcmV0dXJuOwogICAgaGFuZGxlS2V5RG93bihldmVudCk7CiAgfQogIGZ1bmN0aW9uIG9uVG91Y2hTdGFydChldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHNjcm9sbGluZwoKICAgIHN3aXRjaCAoZXZlbnQudG91Y2hlcy5sZW5ndGgpIHsKICAgICAgY2FzZSAxOgogICAgICAgIHN3aXRjaCAoc2NvcGUudG91Y2hlcy5PTkUpIHsKICAgICAgICAgIGNhc2UgVEhSRUUuVE9VQ0guUk9UQVRFOgogICAgICAgICAgICBpZiAoc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgICAgICBoYW5kbGVUb3VjaFN0YXJ0Um90YXRlKGV2ZW50KTsKICAgICAgICAgICAgc3RhdGUgPSBTVEFURS5UT1VDSF9ST1RBVEU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBUSFJFRS5UT1VDSC5QQU46CiAgICAgICAgICAgIGlmIChzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICAgIGhhbmRsZVRvdWNoU3RhcnRQYW4oZXZlbnQpOwogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlRPVUNIX1BBTjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDI6CiAgICAgICAgc3dpdGNoIChzY29wZS50b3VjaGVzLlRXTykgewogICAgICAgICAgY2FzZSBUSFJFRS5UT1VDSC5ET0xMWV9QQU46CiAgICAgICAgICAgIGlmIChzY29wZS5lbmFibGVab29tID09PSBmYWxzZSAmJiBzY29wZS5lbmFibGVQYW4gPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgICAgIGhhbmRsZVRvdWNoU3RhcnREb2xseVBhbihldmVudCk7CiAgICAgICAgICAgIHN0YXRlID0gU1RBVEUuVE9VQ0hfRE9MTFlfUEFOOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgVEhSRUUuVE9VQ0guRE9MTFlfUk9UQVRFOgogICAgICAgICAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgJiYgc2NvcGUuZW5hYmxlUm90YXRlID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgICAgICBoYW5kbGVUb3VjaFN0YXJ0RG9sbHlSb3RhdGUoZXZlbnQpOwogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLlRPVUNIX0RPTExZX1JPVEFURTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBzdGF0ZSA9IFNUQVRFLk5PTkU7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIHN0YXRlID0gU1RBVEUuTk9ORTsKICAgIH0KICAgIGlmIChzdGF0ZSAhPT0gU1RBVEUuTk9ORSkgewogICAgICBzY29wZS5kaXNwYXRjaEV2ZW50KHN0YXJ0RXZlbnQpOwogICAgfQogIH0KICBmdW5jdGlvbiBvblRvdWNoTW92ZShldmVudCkgewogICAgaWYgKHNjb3BlLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm47CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHNjcm9sbGluZwogICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICBzd2l0Y2ggKHN0YXRlKSB7CiAgICAgIGNhc2UgU1RBVEUuVE9VQ0hfUk9UQVRFOgogICAgICAgIGlmIChzY29wZS5lbmFibGVSb3RhdGUgPT09IGZhbHNlKSByZXR1cm47CiAgICAgICAgaGFuZGxlVG91Y2hNb3ZlUm90YXRlKGV2ZW50KTsKICAgICAgICBzY29wZS51cGRhdGUoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBTVEFURS5UT1VDSF9QQU46CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVBhbiA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVUb3VjaE1vdmVQYW4oZXZlbnQpOwogICAgICAgIHNjb3BlLnVwZGF0ZSgpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFNUQVRFLlRPVUNIX0RPTExZX1BBTjoKICAgICAgICBpZiAoc2NvcGUuZW5hYmxlWm9vbSA9PT0gZmFsc2UgJiYgc2NvcGUuZW5hYmxlUGFuID09PSBmYWxzZSkgcmV0dXJuOwogICAgICAgIGhhbmRsZVRvdWNoTW92ZURvbGx5UGFuKGV2ZW50KTsKICAgICAgICBzY29wZS51cGRhdGUoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBTVEFURS5UT1VDSF9ET0xMWV9ST1RBVEU6CiAgICAgICAgaWYgKHNjb3BlLmVuYWJsZVpvb20gPT09IGZhbHNlICYmIHNjb3BlLmVuYWJsZVJvdGF0ZSA9PT0gZmFsc2UpIHJldHVybjsKICAgICAgICBoYW5kbGVUb3VjaE1vdmVEb2xseVJvdGF0ZShldmVudCk7CiAgICAgICAgc2NvcGUudXBkYXRlKCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc3RhdGUgPSBTVEFURS5OT05FOwogICAgfQogIH0KICBmdW5jdGlvbiBvblRvdWNoRW5kKGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIGhhbmRsZVRvdWNoRW5kKGV2ZW50KTsKICAgIHNjb3BlLmRpc3BhdGNoRXZlbnQoZW5kRXZlbnQpOwogICAgc3RhdGUgPSBTVEFURS5OT05FOwogIH0KICBmdW5jdGlvbiBvbkNvbnRleHRNZW51KGV2ZW50KSB7CiAgICBpZiAoc2NvcGUuZW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybjsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgfQoKICAvLwoKICBzY29wZS5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51Jywgb25Db250ZXh0TWVudSk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uUG9pbnRlckRvd24pOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBvbk1vdXNlV2hlZWwpOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCk7CiAgc2NvcGUuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpOwogIHNjb3BlLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUpOwoKICAvLyBmb3JjZSBhbiB1cGRhdGUgYXQgc3RhcnQKCiAgdGhpcy51cGRhdGUoKTsKfTsKT3JiaXRDb250cm9scy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpOwpPcmJpdENvbnRyb2xzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9yYml0Q29udHJvbHM7CgovLyBUaGlzIHNldCBvZiBjb250cm9scyBwZXJmb3JtcyBvcmJpdGluZywgZG9sbHlpbmcgKHpvb21pbmcpLCBhbmQgcGFubmluZy4KLy8gVW5saWtlIFRyYWNrYmFsbENvbnRyb2xzLCBpdCBtYWludGFpbnMgdGhlICJ1cCIgZGlyZWN0aW9uIG9iamVjdC51cCAoK1kgYnkgZGVmYXVsdCkuCi8vIFRoaXMgaXMgdmVyeSBzaW1pbGFyIHRvIE9yYml0Q29udHJvbHMsIGFub3RoZXIgc2V0IG9mIHRvdWNoIGJlaGF2aW9yCi8vCi8vICAgIE9yYml0IC0gcmlnaHQgbW91c2UsIG9yIGxlZnQgbW91c2UgKyBjdHJsL21ldGEvc2hpZnRLZXkgLyB0b3VjaDogdHdvLWZpbmdlciByb3RhdGUKLy8gICAgWm9vbSAtIG1pZGRsZSBtb3VzZSwgb3IgbW91c2V3aGVlbCAvIHRvdWNoOiB0d28tZmluZ2VyIHNwcmVhZCBvciBzcXVpc2gKLy8gICAgUGFuIC0gbGVmdCBtb3VzZSwgb3IgYXJyb3cga2V5cyAvIHRvdWNoOiBvbmUtZmluZ2VyIG1vdmUKCmV4cG9ydCBjb25zdCBNYXBDb250cm9scyA9IGZ1bmN0aW9uIChvYmplY3QsIGRvbUVsZW1lbnQpIHsKICBPcmJpdENvbnRyb2xzLmNhbGwodGhpcywgb2JqZWN0LCBkb21FbGVtZW50KTsKICB0aGlzLnNjcmVlblNwYWNlUGFubmluZyA9IGZhbHNlOyAvLyBwYW4gb3J0aG9nb25hbCB0byB3b3JsZC1zcGFjZSBkaXJlY3Rpb24gY2FtZXJhLnVwCgogIHRoaXMubW91c2VCdXR0b25zLkxFRlQgPSBUSFJFRS5NT1VTRS5QQU47CiAgdGhpcy5tb3VzZUJ1dHRvbnMuUklHSFQgPSBUSFJFRS5NT1VTRS5ST1RBVEU7CiAgdGhpcy50b3VjaGVzLk9ORSA9IFRIUkVFLlRPVUNILlBBTjsKICB0aGlzLnRvdWNoZXMuVFdPID0gVEhSRUUuVE9VQ0guRE9MTFlfUk9UQVRFOwp9OwpNYXBDb250cm9scy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFRIUkVFLkV2ZW50RGlzcGF0Y2hlci5wcm90b3R5cGUpOwpNYXBDb250cm9scy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBDb250cm9sczs="},{"version":3,"names":["THREE","OrbitControls","object","domElement","undefined","console","warn","document","error","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","mouseZoomSpeedFactor","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyCenter","dollyStart","dollyEnd","dollyDelta","getZoomScale","isMouseMovement","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","window","devicePixelRatio","top","bottom","zoomPan","zoomRatio","zoomCenter","panX","x","width","panY","y","height","dollyOut","dollyScale","newZoom","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","canvasRect","getBoundingClientRect","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","needsUpdate","keyCode","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","pointerType","onMouseDown","onMouseMove","onMouseUp","focus","mouseAction","button","ctrlKey","metaKey","shiftKey","stopPropagation","DOLLY_ROTATE","prototype","Object","create","EventDispatcher","constructor","MapControls","call"],"sources":["C:/Users/SDC-8/Desktop/Sowndarya/CMTI ALL PROJECTS/GERB-INDIA(CLIENT)/GerbIndiaDashboard-CMTI-Full/SmartMetrology/smart-frontend/node_modules/dxf-viewer/src/OrbitControls.js"],"sourcesContent":["// Forked from three/examples/js/controls/OrbitControls.js to implement additional features (e.g.\n// zooming on cursor).\n\nimport * as THREE from \"three\"\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nexport const OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\tthis.mouseZoomSpeedFactor = 1;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.ROTATE, MIDDLE: THREE.MOUSE.DOLLY, RIGHT: THREE.MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: THREE.TOUCH.ROTATE, TWO: THREE.TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// the target DOM element for key events\n\tthis._domElementKeyEvents = null;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\tthis._domElementKeyEvents = domElement;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().invert();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t}\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyCenter = new THREE.Vector2();\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale( isMouseMovement ) {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed * ( isMouseMovement ? scope.mouseZoomSpeedFactor : 1 ));\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom /\n\t\t\t\t\telement.clientWidth / window.devicePixelRatio, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom /\n\t\t\t\t\telement.clientHeight / window.devicePixelRatio, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction zoomPan( zoomRatio, zoomCenter) {\n\t\tconst panX = (zoomCenter.x - scope.domElement.width / 2) * (zoomRatio - 1) / zoomRatio\n\t\tconst panY = (zoomCenter.y - scope.domElement.height / 2) * (zoomRatio - 1) / zoomRatio\n\t\tpan(-panX, -panY)\n\t}\n\n\tfunction dollyOut( dollyScale, zoomCenter ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tconst newZoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tzoomPan(newZoom / scope.object.zoom, zoomCenter)\n\t\t\tscope.object.zoom = newZoom\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale, zoomCenter ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tconst newZoom =\n\t\t\t\tMath.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tzoomPan(newZoom / scope.object.zoom, zoomCenter)\n\t\t\tscope.object.zoom = newZoom;\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tconst canvasRect = scope.domElement.getBoundingClientRect();\n\t\tdollyCenter.set( event.clientX - canvasRect.left, event.clientY - canvasRect.top );\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale(true), dollyCenter );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale(true), dollyCenter );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart )\n\t\t\t.multiplyScalar( scope.panSpeed * window.devicePixelRatio );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tconst canvasRect = scope.domElement.getBoundingClientRect()\n\t\tconst zoomCenter = new THREE.Vector2(\n\t\t\t(event.clientX - canvasRect.left) * window.devicePixelRatio,\n\t\t\t(event.clientY - canvasRect.top) * window.devicePixelRatio)\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale(), zoomCenter );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale(), zoomCenter );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\t\tconst canvasRect = scope.domElement.getBoundingClientRect();\n\t\tdollyCenter.set(\n\t\t\t(event.touches[0].clientX + event.touches[1].clientX) / 2 - canvasRect.left,\n\t\t\t(event.touches[0].clientY + event.touches[1].clientY) / 2 - canvasRect.top )\n\t\t\t.multiplyScalar(window.devicePixelRatio);\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart )\n\t\t\t.multiplyScalar( scope.panSpeed * window.devicePixelRatio );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, dollyEnd.y / dollyStart.y );\n\n\t\tdollyOut( dollyDelta.y, dollyCenter );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseDown( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseMove( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tswitch ( event.pointerType ) {\n\n\t\t\tcase 'mouse':\n\t\t\tcase 'pen':\n\t\t\t\tonMouseUp( event );\n\t\t\t\tbreak;\n\n\t\t\t// TODO touch\n\n\t\t}\n\n\t}\n\n\tfunction onMouseDown( event ) {\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase THREE.MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase THREE.MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase THREE.MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase THREE.TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase THREE.TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nexport const MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = THREE.MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = THREE.MOUSE.ROTATE;\n\n\tthis.touches.ONE = THREE.TOUCH.PAN;\n\tthis.touches.TWO = THREE.TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n"],"mappings":"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"}]}